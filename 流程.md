graph TD
A[开始] --> B[创建窗口]
B --> C[读取窗口事件和值]
C --> D{event == "开始转换"}
D -->|是| E[获取文件名和格式]
E --> F{文件名和格式是否有效}
F -->|是| G[生成输出文件名]
G --> H[调用ffmpeg转换视频]
H --> I[弹出对话框提示完成]
I --> C
F -->|否| J[弹出对话框提示错误]
J --> C
D -->|否| K{event == "查询支持解码的环境"}
K -->|是| L[调用ffmpeg查询解码环境]
L --> C
K -->|否| M{event == "退出" or event == sg.WIN_CLOSED}
M -->|是| N[结束]
M -->|否| C
